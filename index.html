<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nebula Nexus – Asteroids 3D</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body class="bg-gray-900 text-white font-sans">

  <!-- Navbar/Header -->
  <header class="bg-black/70 backdrop-blur-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center px-6 py-4">
      <h1 class="text-2xl font-bold text-yellow-400">Nebula Nexus</h1>
      <nav class="space-x-6 text-lg">
        <a href="p2.html" class="hover:text-blue-400 transition">Home</a>
        <a href="controls.html" class="hover:text-blue-400 transition">Asteroids Effect </a>
        <a href="index.html" class="hover:text-blue-400 transition">Asteroids 3D</a>
        <a href="p.html" class="hover:text-blue-400 transition">NASA Research & History</a>
        <a href="asteroid_watch.html" class="hover:text-blue-400 transition">Asteroid Tracking & Defense</a>
        <a href="team_member.html" class="hover:text-blue-400 transition">Team Members</a>
      </nav>
    </div>
  </header>

  <!-- Title -->
  <h2 class="text-center text-3xl mt-6 mb-4 text-blue-400">NASA Asteroid Watch – 3D Models</h2>

  <!-- Full width 3D asteroid viewer -->
  <div class="w-screen h-[80vh]">
    <model-viewer id="asteroidViewer"
      src="https://assets.science.nasa.gov/content/dam/science/psd/solar/2023/09/b/Bennu_1_1.glb"
      ar ar-modes="webxr scene-viewer quick-look"
      camera-controls shadow-intensity="1" exposure="0.9"
      auto-rotate interaction-prompt="none"
      class="w-full h-full bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900">
    </model-viewer>
  </div>

  <!-- Controls Section -->
  <div class="max-w-3xl mx-auto p-6 mt-6 bg-black/70 rounded-xl backdrop-blur-md">
    <h3 class="text-xl mb-2">Asteroid Models</h3>
    <select id="modelPicker" class="w-full p-3 mb-4 rounded-lg bg-gray-800 text-white border border-cyan-500">
      <option value="https://assets.science.nasa.gov/content/dam/science/psd/solar/2023/09/b/Bennu_1_1.glb">(101955) Bennu</option>
      <option value="https://assets.science.nasa.gov/content/dam/science/psd/solar/2023/09/r/Ryugu_1_1.glb">(162173) Ryugu</option>
      <option value="https://nasa-public-data.s3.amazonaws.com/3dmodels/Apophis.glb">(99942) Apophis</option>
      <option value="https://nasa-public-data.s3.amazonaws.com/3dmodels/Psyche.glb">(16) Psyche</option>
      <option value="https://nasa-public-data.s3.amazonaws.com/3dmodels/Vesta.glb">(4) Vesta</option>
      <option value="https://assets.science.nasa.gov/content/dam/science/psd/solar/2023/09/e/Eros_1_10.glb">(433) Eros</option>
      <option value="https://assets.science.nasa.gov/content/dam/science/psd/solar/2023/09/i/Itokawa_1_1.glb">(25143) Itokawa</option>
    </select>

    <h3 class="text-xl mb-2">Simulation Controls</h3>
    <input id="neoId" placeholder="Asteroid Name / NEO ID" class="w-full p-3 mb-3 rounded-lg bg-gray-800 text-white border border-cyan-500">
    <input id="nasaKey" value="DEMO_KEY" class="w-full p-3 mb-3 rounded-lg bg-gray-800 text-white border border-cyan-500">
    <button onclick="fetchNEO()" class="w-full p-3 bg-cyan-500 rounded-lg font-bold hover:bg-cyan-400 transition">Fetch NEO Data</button>
    <div id="output" class="mt-4 whitespace-pre-wrap"></div>
  </div>

  <!-- Scripts -->
  <script>
    // Switch 3D models
    document.getElementById('modelPicker').addEventListener('change', function() {
      document.getElementById('asteroidViewer').src = this.value;
    });

    // Fetch NEO data
    async function fetchNEO(){
      const id = document.getElementById('neoId').value.trim();
      const key = document.getElementById('nasaKey').value.trim() || 'DEMO_KEY';
      if(!id){ alert('Enter a NEO name or ID'); return; }
      try{
        let url = /^\d+$/.test(id)
          ? `https://api.nasa.gov/neo/rest/v1/neo/${id}?api_key=${key}`
          : `https://api.nasa.gov/neo/rest/v1/neo/browse?api_key=${key}&size=20`;
        const res = await fetch(url);
        const data = await res.json();
        let neo = data.id ? data : data.near_earth_objects.find(n => n.name.toLowerCase().includes(id.toLowerCase())) || data.near_earth_objects[0];
        if(!neo){ document.getElementById('output').innerText='NEO not found'; return; }
        document.getElementById('output').innerText = 
          `Name: ${neo.name}\nID: ${neo.id}\nEstimated Diameter: ${neo.estimated_diameter.meters.estimated_diameter_max.toFixed(2)} m`;
      }catch(err){ 
        console.error(err); 
        document.getElementById('output').innerText='Fetch failed'; 
      }
    }
  </script>

</body>
</html>
